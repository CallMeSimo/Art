<html>

<head>
  <!-- Simple stylesheet -->
  <style>
    .center {
      display: table;
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      width: 100%;
      color: #253d8d;
    }
  </style>

</head>

<!-- Loads drawLine() On start -->

<body id="root" onload="start()" style="transition: background-color 500ms">
  <center>
    <ul>
      <ol>
        <canvas id="canvas" style="width:250px; height: 250px; margin-top: 20%; ">
        </canvas>
      </ol>
      <ol>
        <input id="range" type="range" min="1" max="100" value="5" />
      </ol>
      <ol>
        <input id="Speedrange" type="range" min="1000" max="10000" value="5000" />
      </ol>
    </ul>
  </center>


</body>
<script>
  // define our tags for use
  var main = document.getElementById("root");
  var c = document.getElementById("canvas"); //Gets canvas onto "c"
  var ctx = c.getContext("2d"); // Gets "c"(Our canvas) 2d so it can later draw on it

  // Website style
  main.style.backgroundColor = "#253d8d";
  c.style.backgroundColor = "aqua";

  //Constant variables (Easy access)
  let time = 1000;
  let Amount;

  //Our crosslist
  var myList = new Array;
  var prevList = new Array;



  class Cross {
    constructor(x, y, id) {
      this.x = x;
      this.y = y;
      this.id = id;

    }

  }


  function start() {
    //repeats prime() function with {time} intervals
    setInterval(() => prime(), time)
  }

  function prime() {
    Amount = parseInt(document.getElementById("range").value);
    time = parseFloat(document.getElementById("Speedrange").value); //Does not work
    console.log(time)
    color()
    clearCanvas()
    crossProperty(Amount)
    drawAllCrosses()

  }

  //Just to make random more efficent to write. 101 = 100
  function rand(int) {
    return Math.random() * int
  }

  //Color is based on time of day with = new Date()
  function color() {
    var date = new Date();
    let ms = date.getMilliseconds();
    main.style.backgroundColor = "#" + ms + "";
  }

  //Creates "Crosses"(objects) and adds properties per unit
  function crossProperty(unit) {
    for (let i = 0; i != unit; i++) {
      let x = rand(canvas.width);
      let y = rand(canvas.height);

      var obji = new Cross(x, y, i);
      console.log("list_:", myList);
      console.log("Prevlist_:", prevList);


      myList.push(obji)//List that will be generated
      prevList.push(obji)//List that will be compared in smoothTransition WiP
    }
  }

  function drawCross(pos) {
    ctx.beginPath();
    ctx.moveTo(pos.x, pos.y);
    ctx.lineTo(pos.x, pos.y + 20);
    ctx.lineTo(pos.x, pos.y + 5);

    ctx.lineTo(pos.x + 10, pos.y + 5);
    ctx.lineTo(pos.x - 10, pos.y + 5);
    ctx.stroke();
    ctx.closePath();
  }

  function drawAllCrosses() {
    myList.forEach(listObj => {
      drawCross(listObj)
      smoothTransistion(listObj.x, listObj.y)

    });

  }

  function transition() {
  }
  //WiP. Smooth transition from prev position too current position
  function smoothTransistion(x1, y1) {
    // if (prevList.length > 5) {
    //   for (let i = 0; i != 5; i++) { //Might have to change 5 => 4

    //     // var transitX = x1 - prevList[i].x //x2
    //     // var transitY = y1 - prevList[i].y //y2

    //     var transitD = Math.sqrt((prevList[i].x - x1)**2 + (prevList[i].y - y1)** 2);
    //     transitD = Math.round(transitD)

    //     console.log("transidD", transitD)

    //     w=λu+(1−λ)v
    //     λ∈[0,1]

    //     while(transitD != 0) {
    //       ctx.beginPath();
    //       ctx.moveTo(prevList[i].x  + g, prevList[i].y + g);
    //       ctx.arc(60, 65, 5, 0, Math.PI * 2, true)
    //       ctx.stroke();
    //       ctx.closePath();
    //       setInterval(() => clearCanvas(), 10)
    //     }
    //   }
      
    // }
  }


  //This clears our canvas when called
  function clearCanvas() {
    //Clears canvas
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    myList = []
    prevList = prevList.slice(0,5)
    console.log("Prevlist_2:", prevList);

  }

</script>

</html>